---
description: "Python íŒŒì¼ ê·œì¹™ - PEP 8 ë° ëª¨ë²” ì‚¬ë¡€"
globs: ["**/*.py"]
alwaysApply: false
---

# Python ê·œì¹™

Python íŒŒì¼ ì‘ì„± ì‹œ ì ìš©ë˜ëŠ” ê·œì¹™ì…ë‹ˆë‹¤.

---

## ğŸ“‹ ìŠ¤íƒ€ì¼ (PEP 8)

### 1. ë„¤ì´ë° ê·œì¹™

```python
# ë³€ìˆ˜, í•¨ìˆ˜: snake_case
user_name = "John"
def get_user_by_id(user_id): ...

# í´ë˜ìŠ¤: PascalCase
class UserService:
    pass

# ìƒìˆ˜: UPPER_SNAKE_CASE
MAX_RETRIES = 3
API_BASE_URL = "https://api.example.com"

# Private: ì–¸ë”ìŠ¤ì½”ì–´ ì ‘ë‘ì‚¬
_internal_cache = {}
def _helper_function(): ...

# Dunder (Magic): ë”ë¸” ì–¸ë”ìŠ¤ì½”ì–´
def __init__(self): ...
def __str__(self): ...
```

### 2. ë“¤ì—¬ì“°ê¸° ë° ì¤„ ê¸¸ì´

```python
# 4ì¹¸ ë“¤ì—¬ì“°ê¸°
def function():
    if condition:
        do_something()

# ì¤„ ê¸¸ì´: 79ì (ìµœëŒ€ 99ì)
# ê¸´ ì¤„ ë‚˜ëˆ„ê¸°
result = some_function(
    argument_one,
    argument_two,
    argument_three,
)
```

---

## ğŸ“‹ íƒ€ì… íŒíŠ¸ (Python 3.9+)

### 1. ê¸°ë³¸ íƒ€ì…

```python
# âœ… ì¢‹ìŒ: íƒ€ì… íŒíŠ¸ ì‚¬ìš©
def greet(name: str, times: int = 1) -> str:
    return f"Hello, {name}!" * times

def get_user(user_id: int) -> dict | None:
    return users.get(user_id)

# ì»¬ë ‰ì…˜ íƒ€ì…
from typing import Optional

def process_items(items: list[str]) -> dict[str, int]:
    return {item: len(item) for item in items}

def find_user(user_id: int) -> Optional[User]:
    return users.get(user_id)
```

### 2. ë³µì¡í•œ íƒ€ì…

```python
from typing import Callable, TypeVar, Generic

# ì½œë°± í•¨ìˆ˜ íƒ€ì…
Handler = Callable[[str, int], bool]

# ì œë„¤ë¦­
T = TypeVar('T')

class Repository(Generic[T]):
    def get(self, id: int) -> T | None: ...
    def save(self, item: T) -> T: ...
```

---

## ğŸ“‹ í•¨ìˆ˜ ë° í´ë˜ìŠ¤

### 1. í•¨ìˆ˜ ì„¤ê³„

```python
# âœ… ì¢‹ìŒ: ì‘ì€ ë‹¨ì¼ ì±…ì„ í•¨ìˆ˜
def validate_email(email: str) -> bool:
    """ì´ë©”ì¼ í˜•ì‹ ê²€ì¦."""
    import re
    pattern = r'^[\w\.-]+@[\w\.-]+\.\w+$'
    return bool(re.match(pattern, email))

def send_email(to: str, subject: str, body: str) -> bool:
    """ì´ë©”ì¼ ì „ì†¡."""
    if not validate_email(to):
        raise ValueError(f"Invalid email: {to}")
    # ì „ì†¡ ë¡œì§
    return True

# âŒ ë‚˜ì¨: ì—¬ëŸ¬ ì±…ì„ì„ ê°€ì§„ í° í•¨ìˆ˜
def process_and_send_email(to, subject, body):
    # ê²€ì¦ë„ í•˜ê³ 
    # ì „ì†¡ë„ í•˜ê³ 
    # ë¡œê¹…ë„ í•˜ê³ ...
```

### 2. í´ë˜ìŠ¤ ì„¤ê³„

```python
# âœ… ì¢‹ìŒ: dataclass í™œìš©
from dataclasses import dataclass, field

@dataclass
class User:
    id: int
    name: str
    email: str
    tags: list[str] = field(default_factory=list)

# âœ… ì¢‹ìŒ: í”„ë¡œí¼í‹° ì‚¬ìš©
class Circle:
    def __init__(self, radius: float):
        self._radius = radius

    @property
    def radius(self) -> float:
        return self._radius

    @property
    def area(self) -> float:
        import math
        return math.pi * self._radius ** 2
```

---

## ğŸ“‹ ì—ëŸ¬ ì²˜ë¦¬

### 1. ì˜ˆì™¸ ì²˜ë¦¬

```python
# âœ… ì¢‹ìŒ: êµ¬ì²´ì ì¸ ì˜ˆì™¸ ì²˜ë¦¬
try:
    result = fetch_data(url)
except ConnectionError as e:
    logger.error(f"Connection failed: {e}")
    raise
except TimeoutError:
    logger.warning("Request timed out, retrying...")
    result = fetch_data(url, timeout=60)

# âŒ ë‚˜ì¨: ëª¨ë“  ì˜ˆì™¸ ë¬´ì‹œ
try:
    result = fetch_data(url)
except:
    pass
```

### 2. ì»¤ìŠ¤í…€ ì˜ˆì™¸

```python
# âœ… ì¢‹ìŒ: ë„ë©”ì¸ íŠ¹í™” ì˜ˆì™¸
class ValidationError(Exception):
    """ê²€ì¦ ì‹¤íŒ¨ ì˜ˆì™¸."""
    pass

class UserNotFoundError(Exception):
    """ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ."""
    def __init__(self, user_id: int):
        self.user_id = user_id
        super().__init__(f"User not found: {user_id}")
```

---

## ğŸ“‹ ëª¨ë“ˆ ë° ì„í¬íŠ¸

### 1. ì„í¬íŠ¸ ìˆœì„œ

```python
# 1. í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬
import os
import sys
from datetime import datetime

# 2. ì„œë“œíŒŒí‹°
import requests
from fastapi import FastAPI

# 3. ë¡œì»¬
from .models import User
from .utils import validate_email
```

### 2. ì„í¬íŠ¸ ìŠ¤íƒ€ì¼

```python
# âœ… ì¢‹ìŒ: ëª…ì‹œì  ì„í¬íŠ¸
from typing import Optional, List
from collections import defaultdict

# âš ï¸ ì£¼ì˜: ì™€ì¼ë“œì¹´ë“œ ì„í¬íŠ¸ ì§€ì–‘
# from module import *

# âœ… ì¢‹ìŒ: ê¸´ ëª¨ë“ˆëª… ë³„ì¹­
import numpy as np
import pandas as pd
```

---

## ğŸ“‹ ëª¨ë²” ì‚¬ë¡€

### 1. ì»¨í…ìŠ¤íŠ¸ ë§¤ë‹ˆì €

```python
# âœ… ì¢‹ìŒ: with ë¬¸ ì‚¬ìš©
with open('file.txt', 'r') as f:
    content = f.read()

# ì»¤ìŠ¤í…€ ì»¨í…ìŠ¤íŠ¸ ë§¤ë‹ˆì €
from contextlib import contextmanager

@contextmanager
def timer(name: str):
    import time
    start = time.time()
    yield
    print(f"{name}: {time.time() - start:.2f}s")

with timer("Processing"):
    process_data()
```

### 2. ë¦¬ìŠ¤íŠ¸ ì»´í”„ë¦¬í—¨ì…˜

```python
# âœ… ì¢‹ìŒ: ê°„ë‹¨í•œ ë³€í™˜
squares = [x ** 2 for x in range(10)]
even_squares = [x ** 2 for x in range(10) if x % 2 == 0]

# âš ï¸ ë³µì¡í•˜ë©´ ì¼ë°˜ ë£¨í”„ ì‚¬ìš©
# âŒ ë‚˜ì¨
result = [transform(x) for x in items if validate(x) and check(x)]

# âœ… ì¢‹ìŒ
result = []
for x in items:
    if validate(x) and check(x):
        result.append(transform(x))
```

---

## ğŸš« ê¸ˆì§€ ì‚¬í•­

1. **`except:` (bare except) ê¸ˆì§€** - êµ¬ì²´ì  ì˜ˆì™¸ ëª…ì‹œ
2. **`from module import *` ê¸ˆì§€** - ëª…ì‹œì  ì„í¬íŠ¸
3. **ê°€ë³€ ê¸°ë³¸ê°’ ê¸ˆì§€** - `def f(items=[])` ëŒ€ì‹  `items=None`
4. **ì „ì—­ ë³€ìˆ˜ ë‚¨ìš© ê¸ˆì§€**

```python
# âŒ ë‚˜ì¨: ê°€ë³€ ê¸°ë³¸ê°’
def add_item(item, items=[]):
    items.append(item)
    return items

# âœ… ì¢‹ìŒ
def add_item(item, items=None):
    if items is None:
        items = []
    items.append(item)
    return items
```
