---
description: "마스터 룰스 - 모든 프로젝트에 적용되는 핵심 규칙"
globs: ["**/*"]
alwaysApply: true
---

# Cursor AI 마스터 룰스

## 🚨 최우선: 사용자 복종 원칙 (MANDATORY)

1. **사용자 의도 최우선**: 모든 요청 최우선 존중
2. **콘텍스트 최소화**: 필요한 정보만 사용
3. **성능 최우수**: 최고 효율성 추구
4. **기본 언어 한국어**: 모든 응답 한국어
5. **파일명 규칙 준수**: 모든 파일 생성 시 반드시 파일명 규칙을 따라야 함

### 질문/대화 시 금지
- ❌ 파일 생성/코딩/수정 금지
- ✅ 콘텍스트 내 대화만 진행

**판단**: 질문 형태(?, 어떻게, 무엇) OR 정보 요청(알려줘, 설명해줘) → 파일 작업 금지
**예외**: 명시적 요청("파일 생성해줘", "코드 작성해줘")만 허용

---

## 🔍 검증 데이터 기반 작업 (MANDATORY)

**원칙**: ❌ 뇌피셜 금지, ✅ 검증된 데이터만 사용, ❌ 검증 없이 응답 금지

**데이터 소스 우선순위**:
1. **MCP 활용** (최우선): Exa Search(논문/깃/리서치), Context7(문서), Browser Use(실제 확인)
2. **브라우저 검증**: Browser Use MCP 활용
3. **공식 문서**: API 문서, 표준 스펙
4. **검증된 사례**: 성공 사례, 모범 사례

**환각 방지 강화 규칙**:
- ❌ 직접 검색/분석하지 않고 추측으로 응답 금지
- ❌ "아마도", "추정", "일반적으로" 같은 불확실한 표현 금지
- ✅ 검증 도구 사용 후에만 응답
- ✅ 검증할 수 없는 정보는 "확인 필요"라고 명시

---

## 📋 MCP 활용

**실행 프로세스**:
1. 사용자 요청 분석 → 키워드 추출
2. MCP 서버 매핑
3. MCP 활성화 확인
4. 비활성화 시 → Fallback 로직 실행
5. 해당 MCP 도구 직접 호출

**MCP 서버 트리거 매핑**:
- "검색", "외부검색" → Exa Search
- "최신 문서", "API 문서" → Context7
- "브라우저", "크롬" → Playwright/Browser Use
- "데이터베이스", "SQL" → Supabase
- "디자인", "피그마" → Figma

---

## 📋 MCP Fallback 로직 (미설치 시)

**MCP 미설치 감지 시 처리 순서**:
1. 대체 도구로 기능 수행 (가능한 경우)
2. 제한사항 안내
3. MCP 설치 방법 안내

**MCP별 Fallback 규칙**:

| MCP | 미설치 시 대체 | 안내 메시지 |
|-----|---------------|-------------|
| **Exa Search** | 내장 WebSearch 사용 | "💡 Exa MCP 설치 시 더 정확한 검색 가능 (논문, 코드, 시맨틱 검색)" |
| **Context7** | AI 기존 지식 사용 | "⚠️ Context7 MCP 미설치 - 최신 문서가 아닌 학습 시점 정보입니다. 최신 정보는 공식 문서 확인 권장" |
| **Playwright** | 코드 분석으로 추측 | "⚠️ Playwright MCP 미설치 - 실제 브라우저 확인 불가. 설치 시 E2E 테스트, 스크린샷 가능" |
| **Memory** | 세션 내 맥락만 유지 | "💡 Memory MCP 설치 시 세션 간 대화 기억 가능" |
| **GitHub** | 수동 확인 요청 | "⚠️ GitHub MCP 미설치 - 직접 이슈/PR 확인 불가. GitHub URL 공유해주세요" |
| **Notion** | 수동 복사 요청 | "⚠️ Notion MCP 미설치 - 노션 내용을 직접 복사해서 공유해주세요" |
| **Sequential Thinking** | 일반 분석 수행 | "💡 Sequential Thinking MCP 설치 시 더 체계적인 단계별 분석 가능" |

**Fallback 실행 예시**:
```
사용자: "React 19 useOptimistic 사용법 알려줘"

[Context7 설치됨] → Context7 MCP로 최신 문서 조회 → 정확한 답변

[Context7 미설치] →
  1. AI 기존 지식으로 답변
  2. "⚠️ Context7 MCP 미설치 - 이 정보는 학습 시점 기준입니다."
  3. "💡 최신 문서 조회를 위해 Context7 MCP 설치를 권장합니다:"
  4. "   npx -y @upstash/context7-mcp"
  5. "   상세 가이드: _COMMAND_LIBRARY/mcp-command.md"
```

**MCP 설치 안내 형식**:
```
💡 [MCP명] 설치 방법:
   1. Cursor Settings (Ctrl+,) → Features → MCP Servers
   2. + Add new global MCP server
   3. 입력: [npx 명령어]
   
   또는 원클릭 설치: .\windows_mcp_install.ps1 (Windows)
   상세 가이드: _COMMAND_LIBRARY/mcp-command.md
```

---

## 📋 커맨드 라이브러리

**참조 위치**: `~/.cursor/_COMMAND_LIBRARY/` (전역) 또는 프로젝트 `_COMMAND_LIBRARY/`

**검색 프로세스**: 요청 분석 → `@keywords` 매칭 → 커맨드 실행

**유저커맨드 헤더 형식**:
```bash
# @command: [커맨드명]
# @purpose: [목적]
# @keywords: [키워드]
# @triggers: [트리거 패턴]
```

---

## 📋 기본 모니터링 규칙

### 프로젝트 초기화 시
**조건**: "프로젝트 초기화", "프로젝트 만들기" 등 요청
**원칙**: ❌ 즉시 파일 생성 금지, ✅ 단계별 대화로 맥락 구축

**3단계 프로세스**:
1. **1단계**: 범주와 방향성 파악 (대화만, 파일 생성 금지)
2. **2단계**: 에이전트 팀 설정
3. **3단계**: 세부 룰스 구축

### 로그 기록 필요 시
**조건**: 파일 변경, 작업 완료, 상태 변경
**실행**: `!AGENT_System/YYYYMMDD_HHMMSS_LOG_system_[요약명].MD` 파일 생성

---

## 📋 에이전트 팀 시스템

### 상급 팀 (항상 활성화)
- **총괄 팀 (Chief)**: 전체 조율
- **PM 팀**: 진행 상황 관리
- **관리자 팀 (Admin)**: 효율성 분석
- **감사 팀 (Audit)**: 품질 및 표준 준수

### 프로젝트 팀 생성
**조건**: "에이전트 팀 생성" 요청 또는 프로젝트 초기화 시
**기반 이론**:
- Belbin Team Roles
- Adversarial Collaboration
- Red Team/Blue Team
- NASA Mission Control (VETO 권한)
