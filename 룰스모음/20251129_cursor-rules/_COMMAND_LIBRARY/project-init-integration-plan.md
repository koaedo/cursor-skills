# 프로젝트 초기화 3단계 연동 계획서

**목적**: 유저룰스, 유저커맨더, 프로젝트룰스의 완전한 연동을 통한 최고의 전문기법 기반 프로젝트 초기화 시스템

**상태**: 계획 단계 (사용자 승인 대기)

---

## 🎯 핵심 목표

1. **3단계 모두에서 티키타카 (대화) 필수**
2. **인류 최고의 전문기법 적용** (Belbin, Adversarial Collaboration, Red Team/Blue Team, NASA Mission Control)
3. **완전한 연동**: 유저룰스 → 유저커맨더 → 프로젝트룰스

---

## 📋 시스템 아키텍처

### 계층 구조

```
🏛️ 유저룰스 (절대적 상급 팀 - 하나님 역할)
├── 00_MASTER_RULES.md (트리거 감지, 절대적 권위)
└── 05_AGENT_ROLES.md (상급 팀 정의)
    ↓ (지도 및 감독)
🔧 유저커맨더 (실행 계층)
├── project-commands.md (실행 코드)
├── project-init-guide.md (대화 프로세스 가이드)
└── agent-teams.md (팀 생성 가이드)
    ↓ (실행 및 생성)
📁 프로젝트룰스 (프로젝트별 설정)
├── .cursor/rules/AGENT_Teams.mdc (에이전트 팀 구성)
├── .cursor/rules/PROJECT_SETTINGS.mdc (프로젝트 세부 설정)
├── .cursor/rules/TECH_STACK.mdc (기술 스택 상세)
└── .cursor/rules/ARCHITECTURE.mdc (아키텍처 설계)
```

---

## 📋 3단계 상세 연동 계획

### 1단계: 범주와 방향성 파악 (티키타카 필수)

#### 유저룰스 역할
- **트리거 감지**: "프로젝트 초기화", "프로젝트 만들기", "홈페이지 만들자" 등
- **규칙 적용**: 즉시 파일 생성 금지, 대화만 진행
- **참조**: `_COMMAND_LIBRARY/project-init-guide.md` 읽기

#### 유저커맨더 역할
- **대화 프로세스 실행**: `_cursor_init_dialog_step1()` 함수
- **전문기법 적용**:
  - **Socratic Method (소크라테스식 질문)**: 깊이 있는 질문으로 본질 파악
  - **Design Thinking**: 사용자 중심 사고로 문제 정의
  - **Jobs-to-be-Done Framework**: 사용자가 해결하려는 핵심 작업 파악

#### 질문 체계 (사용자 중심 - 비즈니스/목적 중심)

**핵심 원칙**: 사용자가 답할 수 있는 비즈니스/목적 질문만, 기술적 결정은 AI가 제안

**1. 프로젝트 목적 (Why) - 사용자 질문**
- "이 프로젝트가 해결하려는 핵심 문제는 무엇인가요?"
- "사용자가 이 프로젝트를 통해 달성하고 싶은 것은 무엇인가요?"
- "이 프로젝트가 없다면 어떤 불편함이 있나요?"

**2. 프로젝트 범주 (What) - 사용자 질문**
- "이 프로젝트는 어떤 종류인가요?"
  - 회사/브랜드 소개 홈페이지
  - 제품/서비스 소개 및 판매
  - 사용자들이 직접 사용하는 웹 앱
  - 데이터를 분석하는 도구
  - 모바일 앱
  - 기타 (설명해주세요)
- "비슷한 사이트/앱이 있나요? (참고할 만한 것)"

**3. 핵심 기능 (What) - 사용자 질문**
- "필수로 들어가야 하는 기능은 무엇인가요?"
- "나중에 추가해도 되는 기능은 무엇인가요?"
- "특별히 중요한 기능이 있나요?"

**4. 대상 사용자 (Who) - 사용자 질문**
- "주로 누가 사용하나요? (일반인, 전문가, 기업 등)"
- "사용자들이 어떤 기기를 주로 사용하나요? (PC, 모바일, 둘 다)"
- "접근성이 중요한가요? (시각/청각 장애인 고려 등)"

**5. 프로젝트 규모 (Scale) - 사용자 질문**
- "얼마나 큰 규모인가요? (작은 프로젝트, 중간, 큰 프로젝트)"
- "단계별로 진행할 계획인가요?"
- "가장 먼저 만들어야 하는 핵심 기능은?"

**6. 제약사항 (Constraints) - 사용자 질문**
- "기존에 사용 중인 시스템이 있나요? (연동 필요)"
- "특별한 제약사항이 있나요? (예산, 시간, 기술 등)"
- "선호하는 기술이 있나요? (없다면 AI가 최적 제안)"

**AI 역할**: 사용자 답변 기반으로 기술 스택, 아키텍처, 도구 등을 전문가 관점에서 제안

#### 출력 (프로젝트룰스)
- **파일 생성 없음** (대화만)
- **요약 문서**: `.cursor/rules/INIT_STEP1_SUMMARY.md` (임시, 확인용)
- **내용**: 범주, 방향성, 핵심 요구사항 요약

#### AI 제안 및 사용자 확인
- **AI 역할**: 사용자 답변 기반으로 기술 스택, 아키텍처 제안
- **제안 형식**: "제안: React + Node.js + PostgreSQL 스택을 추천합니다. 이유는..."
- **사용자 확인**: 
  - "위 요약과 기술 제안이 적절한가요? 수정할 부분이 있나요?"
  - 기술적 선호도가 있으면 반영, 없으면 AI 제안 수락
- 확인 후 2단계 진행

---

### 2단계: 프로젝트 에이전트 팀 설정 (AI 최고 실력자 주도)

#### 핵심 원칙
- **1단계 완료 후**: 프로젝트 목적과 사용 범주가 공유됨
- **AI 역할**: 해당 분야의 최고 실력자로서 인류 최고의 기법으로 에이전트 팀 구성
- **사용자 역할**: 최소한의 확인만 (AI가 전문가 관점에서 최적 구성)

#### 유저룰스 역할
- **트리거**: 1단계 완료 확인
- **규칙 적용**: `create_project_agent_teams` 커맨드 실행
- **참조**: `_COMMAND_LIBRARY/agent-teams.md` 읽기

#### 유저커맨더 역할 (AI 최고 실력자)
- **전문가 분석**: 1단계에서 파악한 목적/범주 기반으로 프로젝트 특성 분석
- **인류 최고 기법 적용**:
  - **Belbin Team Roles**: 9가지 팀 역할 이론으로 최적 팀 구성
  - **Adversarial Collaboration**: 논쟁 기반 협업 구조 설계
  - **Red Team/Blue Team**: 적대적 검증 팀 포함
  - **NASA Mission Control**: VETO 권한 시스템 설계
  - **Domain Expertise**: 해당 분야(웹/앱/API 등)의 최고 전문가 관점
- **자동 팀 구성**: 사용자 확인 최소화, AI가 최적 구성 제안

#### AI 최고 실력자 분석 프로세스

**1단계 정보 기반 자동 분석**:
- 프로젝트 목적/범주/기능/사용자/규모 정보 활용
- 해당 분야의 최고 전문가 관점에서 분석

**프로젝트 타입별 최적 팀 구성 (AI 자동 결정)**:

**웹사이트/홈페이지**
- AI 분석: "정적/동적 콘텐츠, SEO 필요성, CMS 필요성" → 최적 팀 구성
- 제안: Frontend, Content, SEO, Infrastructure, Testing, Security 팀

**웹 애플리케이션**
- AI 분석: "사용자 인증, 데이터 저장, 실시간 기능" → 최적 팀 구성
- 제안: Frontend, Backend, Database, Infrastructure, Testing, Security, UX 팀

**API/서비스**
- AI 분석: "외부 연동, 트래픽, 마이크로서비스" → 최적 팀 구성
- 제안: API Design, Backend, Infrastructure, Testing, Security, Monitoring 팀

**AI 역할**: 
- 인류 최고 기법(Belbin, Adversarial Collaboration 등)으로 최적 팀 구성
- 각 팀의 역할, 전문성, 관점, 논쟁 포인트 자동 정의
- VETO 권한 시스템 자동 설계
- 사용자 확인: "이 팀 구성을 제안합니다. 수정할 부분이 있나요?" (최소 확인)

#### 팀 구성 생성 (AI 최고 실력자 주도)
- **입력**: 1단계에서 파악한 목적/범주/기능/사용자/규모 정보
- **AI 분석**: 해당 분야 최고 전문가 관점에서 최적 팀 구성 결정
- **인류 최고 기법 적용**:
  - Belbin Team Roles로 역할 분배
  - Adversarial Collaboration 구조 설계
  - Red Team/Blue Team 포함
  - NASA Mission Control VETO 권한 시스템
- **자동 생성**: 각 팀의 역할, 전문성, 관점, 논쟁 포인트 자동 정의

#### 출력 (프로젝트룰스)
- **파일 생성**: `.cursor/rules/AGENT_Teams.mdc`
- **내용**:
  - 이론적 기반 (Belbin, Adversarial Collaboration 등)
  - 팀 구성 (각 팀의 역할, 전문성, 관점) - AI가 최적 구성
  - 논쟁 규칙 (Adversarial Collaboration)
  - VETO 권한 테이블
  - 팀 간 의존 관계

#### AI 제안 및 사용자 확인 (최소 확인)
- **AI 역할**: 인류 최고 기법으로 최적화된 에이전트 팀 구성 제안
- **제안 형식**: 
  - "프로젝트 특성을 분석한 결과, 다음 팀 구성을 제안합니다:"
  - "Frontend, Backend, Infrastructure, Testing, Security 팀"
  - "각 팀의 역할과 논쟁 포인트는 다음과 같습니다:"
  - "이 구성은 Belbin Team Roles와 Adversarial Collaboration 기법을 적용했습니다."
- **사용자 확인**: 
  - "이 팀 구성을 검토해주세요. 수정할 부분이 있나요?" (최소 확인)
  - 팀 추가/제거 요청 가능 (드물게 발생)
- 확인 후 3단계 진행

---

### 3단계: 팀 관점에서 세부 룰스 구축 (유저와 에이전트 팀 티키타카)

#### 핵심 원칙
- **2단계 완료 후**: 최적화된 에이전트 팀이 구성됨
- **티키타카 방식**: 유저와 각 에이전트 팀이 대화로 환경과 프로젝트 룰스 확정
- **인류 최고 기법**: 각 팀이 자신의 전문 분야에서 최고 기법으로 제안

#### 유저룰스 역할
- **트리거**: 2단계 완료 확인
- **규칙 적용**: 각 팀별 티키타카 프로세스
- **참조**: 생성된 `AGENT_Teams.mdc` 읽기

#### 유저커맨더 역할 (에이전트 팀과 유저 티키타카)
- **대화 프로세스 실행**: `_cursor_init_dialog_step3()` 함수
- **각 에이전트 팀이 유저와 대화**:
  - 각 팀이 자신의 전문 분야에서 비즈니스 질문
  - 유저 답변 기반으로 인류 최고 기법으로 제안
  - 유저와 대화로 최종 확정
- **전문기법 적용**:
  - **각 팀의 관점에서 질문**: 팀별 전문성 기반 질문
  - **Adversarial Collaboration**: 팀 간 논쟁 시뮬레이션
  - **Design Patterns**: 아키텍처 패턴 제안
  - **Best Practices**: 각 분야의 모범 사례 적용

#### 티키타카 체계 (각 에이전트 팀과 유저 대화)

**핵심 원칙**: 각 에이전트 팀이 유저와 대화 → 인류 최고 기법으로 제안 → 유저와 확정

**프로세스**:
1. 각 팀이 순차적으로 유저와 대화
2. 팀별 비즈니스 질문 → 유저 답변
3. 팀이 인류 최고 기법으로 제안
4. 유저와 대화로 최종 확정

**Frontend Team과 티키타카**
- **Frontend Team 질문**:
  - "디자인 가이드나 브랜드 가이드가 있나요?"
  - "모바일에서도 잘 보여야 하나요?"
  - "접근성이 중요한가요? (시각/청각 장애인 고려)"
  - "로딩 속도가 중요한가요?"
- **Frontend Team 제안** (인류 최고 기법):
  - "제안: Atomic Design 패턴으로 디자인 시스템 구축"
  - "제안: Mobile-First 반응형 전략"
  - "제안: WCAG 2.1 AA 수준 접근성 구현"
  - "제안: Code Splitting과 Lazy Loading으로 성능 최적화"
- **유저와 대화**: "이 제안이 적절한가요? 수정할 부분이 있나요?"

**Backend Team과 티키타카**
- **Backend Team 질문**:
  - "어떤 데이터를 저장하나요?"
  - "데이터가 얼마나 많을 것 같나요?"
  - "여러 사용자가 동시에 사용하나요?"
- **Backend Team 제안** (인류 최고 기법):
  - "제안: RESTful API 설계 원칙 적용"
  - "제안: PostgreSQL (관계형) 또는 MongoDB (문서형) 선택"
  - "제안: JWT 기반 Stateless 인증"
  - "제안: Redis 캐싱 전략"
- **유저와 대화**: "이 제안이 적절한가요? 수정할 부분이 있나요?"

**Infrastructure Team과 티키타카**
- **Infrastructure Team 질문**:
  - "어디에 배포할 계획인가요? (클라우드, 자체 서버 등)"
  - "트래픽이 얼마나 예상되나요?"
  - "24시간 안정적으로 운영되어야 하나요?"
- **Infrastructure Team 제안** (인류 최고 기법):
  - "제안: AWS/GCP/Azure 클라우드 인프라"
  - "제안: GitHub Actions CI/CD 파이프라인"
  - "제안: Prometheus + Grafana 모니터링"
  - "제안: Kubernetes 오토스케일링"
- **유저와 대화**: "이 제안이 적절한가요? 수정할 부분이 있나요?"

**Testing Team과 티키타카**
- **Testing Team 질문**:
  - "품질이 얼마나 중요한가요? (중요하면 테스트 강화)"
  - "자동으로 테스트하는 것이 중요한가요?"
- **Testing Team 제안** (인류 최고 기법):
  - "제안: Test Pyramid 전략 (단위 > 통합 > E2E)"
  - "제안: 80% 코드 커버리지 목표"
  - "제안: Jest (단위), Cypress (E2E) 자동화"
- **유저와 대화**: "이 제안이 적절한가요? 수정할 부분이 있나요?"

**Security Team과 티키타카**
- **Security Team 질문**:
  - "민감한 정보를 다루나요? (개인정보, 결제정보 등)"
  - "보안이 얼마나 중요한가요?"
  - "규제를 준수해야 하나요? (GDPR, HIPAA 등)"
- **Security Team 제안** (인류 최고 기법):
  - "제안: OWASP Top 10 대응 전략"
  - "제안: AES-256 암호화"
  - "제안: 정기적 취약점 스캔 및 패치 프로세스"
- **유저와 대화**: "이 제안이 적절한가요? 수정할 부분이 있나요?"

**Red Team과 티키타카** (적대적 검증)
- **Red Team 분석**: 프로젝트 특성 기반으로 취약점 우려 영역 자동 분석
- **Red Team 제안**: "다음 영역에서 보안을 강화하는 것을 제안합니다: [분석 결과]"
- **유저와 대화**: "이 제안이 적절한가요? 동의하시나요?"

#### 세부 룰스 생성
- 각 팀의 질문 답변 기반
- 프로젝트 타입별 최적화된 설정

#### 출력 (프로젝트룰스)

**1. PROJECT_SETTINGS.mdc**
- 프로젝트 기본 설정
- 목적, 범주, 규모
- 핵심 요구사항
- 제약사항

**2. TECH_STACK.mdc**
- 기술 스택 상세
- 프론트엔드: 프레임워크, 라이브러리, 도구
- 백엔드: 언어, 프레임워크, 데이터베이스
- 인프라: 클라우드, 컨테이너, CI/CD
- 개발 도구: IDE, 린터, 포맷터

**3. ARCHITECTURE.mdc**
- 아키텍처 설계
- 시스템 구조도
- 컴포넌트 구조
- 데이터 흐름
- API 설계
- 보안 아키텍처

#### 티키타카 프로세스 및 최종 확정

**프로세스**:
1. 각 에이전트 팀이 순차적으로 유저와 대화
2. 팀별 비즈니스 질문 → 유저 답변
3. 팀이 인류 최고 기법으로 제안 (이유 설명 포함)
4. 유저와 대화로 최종 확정
5. 모든 팀과의 대화 완료 후 세부 룰스 파일 생성

**각 팀의 제안 형식**:
- "Frontend Team 제안: React + TypeScript + Tailwind CSS를 사용합니다"
  - "이유: [인류 최고 기법 기반 설명]"
- "Backend Team 제안: Node.js + Express + PostgreSQL을 사용합니다"
  - "이유: [인류 최고 기법 기반 설명]"
- 각 제안에 이유 설명 (인류 최고 기법 기반)

**유저와 대화**:
- 각 팀과의 대화에서: "이 제안이 적절한가요? 수정할 부분이 있나요?"
- 기술적 선호도가 있으면 반영, 없으면 팀 제안 수락
- 모든 팀과의 대화 완료 후 최종 확인

**최종 확인**:
- "모든 에이전트 팀과의 대화가 완료되었습니다."
- "생성된 세부 룰스를 검토해주세요. 수정할 부분이 있나요?"
- 확인 후 프로젝트 초기화 완료

---

## 📋 연동 메커니즘

### 유저룰스 → 유저커맨더

**트리거 감지**:
```markdown
IF 사용자 요청 == "프로젝트 초기화" OR "프로젝트 만들기" OR "홈페이지 만들자":
  1. "@keywords: 프로젝트,초기화,init,bootstrap" 검색
  2. `_COMMAND_LIBRARY/project-init-guide.md` 참조
  3. 1단계 대화 시작 (파일 생성 없음)
```

**상태 관리**:
- 각 단계 완료 시 상태 저장: `!AGENT_System/INIT_STATE.json`
- 다음 단계 진행 전 상태 확인

### 유저커맨더 → 프로젝트룰스

**파일 생성 프로세스**:
```bash
# 1단계: 요약 문서 (임시, 확인용)
.cursor/rules/INIT_STEP1_SUMMARY.md

# 2단계: 에이전트 팀 구성
.cursor/rules/AGENT_Teams.mdc

# 3단계: 세부 룰스
.cursor/rules/PROJECT_SETTINGS.mdc
.cursor/rules/TECH_STACK.mdc
.cursor/rules/ARCHITECTURE.mdc
```

**파일 형식**:
- `.mdc` 확장자 (Cursor Rules 형식)
- YAML frontmatter 포함
- `alwaysApply: false` (필요시 활성화)

### 프로젝트룰스 → 유저룰스

**피드백 루프**:
- 생성된 프로젝트룰스 파일을 유저룰스가 참조
- 프로젝트 작업 시 프로젝트룰스 우선 적용
- 유저룰스는 절대적 상급 팀으로 감독

---

## 📋 구현 계획

### Phase 1: 유저룰스 업데이트
- [ ] `00_MASTER_RULES.md`에 3단계 대화 프로세스 상세 정의
- [ ] 각 단계별 티키타카 필수 규칙 추가
- [ ] 상태 관리 규칙 추가

### Phase 2: 유저커맨더 구현
- [ ] `_cursor_init_dialog_step1()` 함수 구현
- [ ] `_cursor_init_dialog_step2()` 함수 구현
- [ ] `_cursor_init_dialog_step3()` 함수 구현
- [ ] 상태 관리 함수 구현 (`_cursor_init_state_save/load`)

### Phase 3: 프로젝트룰스 템플릿
- [ ] `AGENT_Teams.mdc` 템플릿 생성
- [ ] `PROJECT_SETTINGS.mdc` 템플릿 생성
- [ ] `TECH_STACK.mdc` 템플릿 생성
- [ ] `ARCHITECTURE.mdc` 템플릿 생성

### Phase 4: 통합 테스트
- [ ] 전체 프로세스 테스트
- [ ] 각 단계별 티키타카 검증
- [ ] 파일 생성 검증
- [ ] 연동 검증

---

## 📋 전문기법 적용 체크리스트

### 1단계: 범주와 방향성 파악
- [x] Socratic Method (소크라테스식 질문)
- [x] Design Thinking
- [x] Jobs-to-be-Done Framework

### 2단계: 프로젝트 에이전트 팀 설정
- [x] Belbin Team Roles
- [x] Adversarial Collaboration
- [x] Red Team/Blue Team
- [x] NASA Mission Control (VETO 권한)

### 3단계: 팀 관점에서 세부 룰스 구축
- [x] 각 팀의 관점에서 질문
- [x] Adversarial Collaboration (논쟁 시뮬레이션)
- [x] Design Patterns
- [x] Best Practices

---

## 📋 승인 요청

이 계획서는 다음을 보장합니다:

1. ✅ **3단계 모두에서 티키타카 필수**: 각 단계마다 대화 프로세스 포함
2. ✅ **최고의 전문기법 적용**: Belbin, Adversarial Collaboration, Red Team/Blue Team, NASA Mission Control 등
3. ✅ **완전한 연동**: 유저룰스 → 유저커맨더 → 프로젝트룰스

**승인 여부를 알려주시면 구현을 시작하겠습니다.**

---

**이 계획서는 프로젝트 초기화 3단계 연동의 완전한 설계를 제공합니다.**

